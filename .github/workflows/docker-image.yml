name: Docker Image CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:

  build-and-deploy:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Build the Docker image
      run: docker build . --file Dockerfile --tag vinokkk/tttt:latest 
    - name: Push the Docker image 
      run: docker login -u vinokkk -p Jin196632. && docker push vinokkk/tttt:latest
#     - name: Install 
#       run: apt-get update && apt-get install expect
#     - name: Deploy 
#       run: /usr/bin/expect <<-EOF 
#             set timeout 10 
#             spawn ssh root@39.101.74.166  "cd /root && ./deploy.sh" 
#             expect "root@39.101.74.166's password:" 
#             send "Jin196632.\n" 
#             expect eof 
#             EOF 
# 
